#!/usr/bin/env bash
set -e

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
RESET='\033[0m'

echo "Setting up the environment..."
./set-target.sh $1 &> /dev/null

echo "Trying to generate an exploit for '$1'..."
./launch-crax.sh &> /dev/null

if ls exploit_*.py &> /dev/null; then
  echo -e "${RED}!!! '$1' is automatically exploitable by CRAX++ !!! ${RESET}"
  exit 1
fi

echo -e "${GREEN}Good news, '$1' is not automatically exploitable by CRAX++.${RESET}"
